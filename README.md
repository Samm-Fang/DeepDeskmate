# DeepDeskmate

<p align="center">
  <img src="images/logo.png" alt="DeepDeskmate Logo" width="200"/>
</p>
DeepDeskmate 是一款智能助手应用，旨在利用大语言模型（LLM）的强大能力，赋能用户高效管理人员信息、智能编排座位，并对座位安排进行灵活的微调。本项目是作者在LLM深度融合应用开发领域的初次尝试，也是对AI技术如何赋能日常生活与工作场景的一次积极探索。

## ✨ 主要功能

*   **灵活的模型配置**：支持通过图形化界面配置和管理与AI模型交互所需的参数。
*   **AI驱动的人员信息管理**：通过自然语言描述，实现人员信息的智能录入、更新和删除。
*   **双模式智能座位编排**：
    *   **教室座位表模式**：通过设置行、列、同桌数，快速生成传统的教室网格布局。
    *   **自定义座位模式**：提供一个交互式画布，用户可以通过点击鼠标自由创建、删除座位，或添加讲台、过道等备注，实现任意不规则的座位布局（如会议室、圆形剧场等）。
*   **座位微调与导入/导出**：两种模式下均支持对AI编排结果进行多轮对话式微调，并可以导入/导出Markdown格式的座位表和人员信息表。

## 🚀 快速上手

DeepDeskmate 的界面主要分为人员信息管理、座位表生成与编排，以及通过侧边栏进行的模型配置和Agent交互。

### 1. 模型配置 (⚙️ 按钮)

在使用AI功能前，您需要配置与大语言模型API的连接参数。

*   **打开配置面板**：点击页面右下角的“⚙️”（设置）按钮，即可拉出模型配置侧边栏。
*   **DeepSeek快速配置**（可选）：如果您使用DeepSeek平台，可以直接在此区域输入您的DeepSeek API Key，然后点击“快速配置DeepSeek”按钮。系统会自动为您添加一个预设的DeepSeek提供商，并将其模型选定用于相关任务。
*   **管理提供商与模型**：
    *   **添加提供商**：点击“添加提供商”按钮，创建一个新的空白提供商配置项。
        *   **提供商名称**：为此提供商指定一个易于识别的名称（例如“我的OpenAI服务”）。
        *   **Base URL**：输入您所使用的大语言模型服务商提供的API基础地址（例如 `https://api.openai.com/v1` 或 `https://api.deepseek.com`）。
        *   **API Key**：输入对应的API密钥。
        *   **获取模型列表**（可选）：填写正确的Base URL和API Key后，点击“获取模型列表”按钮，系统会尝试从服务商处拉取可用模型。成功后，您可以在下方勾选需要启用的模型。
        *   **手动添加模型ID**：您也可以在文本框中手动输入模型ID（每行一个），然后点击“更新手动模型”。这些模型也会被视为可用并自动启用。
        *   **移除提供商**：删除整个提供商配置。
    *   **使用模型选择**：
        *   在此区域，您可以为应用内的各项AI任务（信息整理、座位表生成、座位微调、Agent驱动）分别选择一个已配置好的模型。
        *   点击对应任务的下拉选择框，会列出所有提供商下已启用的模型。
        *   选择完毕后，点击“保存模型选择”按钮。
*   **关闭配置面板**：点击侧边栏右上角的“×”按钮或再次点击“⚙️”按钮。

### 2. 人员信息管理

此区域用于录入、查看和管理参与座位编排的人员信息。

*   **输入人物描述**：在“输入需要整理的人物描述”文本框中，用自然语言描述人员信息。例如：“张三，男，技术负责人，擅长沟通协调，希望能和李四坐一起。王五，女，新同事，需要一个安静的位置。”
*   **AI整理**：点击“AI整理”按钮。AI将分析您的描述，并智能地：
    *   **新增**：识别描述中新出现的人物，并添加到下方的人员信息表中。
    *   **修改**：如果描述中提及已存在的人物并提供了新的信息，AI会更新该人物的备注。
    *   **删除**（需要AI明确理解）：如果AI判断某些人物不再需要，可能会提示删除。
    *   AI处理时会显示“AI 正在处理中...”的加载提示，并在“AI 思考过程...”区域实时显示其部分思考逻辑（如果模型支持并返回）。处理完成后，下方“人员信息表”会自动更新。
*   **人员信息表**：以表格形式展示当前所有人员的姓名、性别和备注。您可以点击表头左侧的“<”按钮折叠/展开列表视图。
*   **清除**：点击“清除”按钮，将清空当前所有人员信息数据和相关的AI对话历史。
*   **复制**：点击“复制”按钮，可以将当前人员信息表的Markdown文本复制到剪贴板。
*   **导入人员信息表 (Markdown格式)**：
    *   在下方的文本框中，粘贴符合格式的人员信息Markdown表格。
    *   格式示例：
        ```markdown
        | 人物 | 性别 | 备注 |
        | --- | --- | --- |
        | 张三 | 男 | 技术部 |
        | 李四 | 女 | 产品部 |
        ```
    *   点击文本框右上角的“导入”按钮，表格内容将被加载到系统中。

### 3. 座位列表生成与AI智能编排

此区域用于创建座位表结构，并由AI进行智能座位分配。应用提供两种互补的模式：

*   **模式切换**：在“座位列表生成器”标题右侧，您可以在“教室座位表”（默认）和“自定义座位”两种模式间自由切换。

#### 教室座位表模式

此模式适用于快速生成规则的网格布局。

*   **设置座位表结构**：通过输入“行数”、“列数”和“同桌数”来定义布局。下方的预览区会实时展示生成的空座位表。
*   **AI智能编排**：
    *   在“编排备注”中输入要求（如“张三和李四坐一起”）。
    *   点击“AI编排”按钮，AI将结合人员信息、备注和座位结构，自动分配座位。
    *   结果会显示在预览区，并根据性别着色。

#### 自定义座位模式

此模式为您提供极致的灵活性，以应对非标准布局需求。

*   **设置画布尺寸**：通过“表格行数”和“表格列数”定义您的布局画布大小。
*   **交互式布局**：
    *   **左键点击**：在任意空白单元格上单击，即可创建一个座位。座位编号会自动从左到右、从上到下生成。
    *   **右键点击**：在任意单元格上右击，会弹出上下文菜单：
        *   **删除座位**：如果点击的是一个座位，此选项可用。
        *   **添加/编辑备注**：为任意单元格添加文本，如“讲台”、“过道”、“柱子”等。单元格会变为一个可直接编辑的输入框。
        *   **清空单元格**：移除备注，恢复为空白单元格。
*   **AI智能编排**：
    *   完成自定义布局后，同样可以在“编排备注”中输入要求，然后点击“AI编排”。
    *   AI会收到关于此布局不规则的特别提示，并根据您创建的座位ID和布局进行智能分配。
    *   编排结果会准确地渲染回您的自定义布局上。

#### 通用功能

*   **复制编排结果**：在任一模式下，点击此按钮可复制AI生成的座位表的Markdown文本。
*   **清空座位**：点击此按钮可清除当前座位表上所有的人员安排，但保留座位布局结构。

### 4. 座位表导入与细微调整

在AI完成初步编排或您手动导入一个座位表后，可以进行细微调整。

*   **导入座位表 (Markdown格式)**：
    *   在下方的文本框中，粘贴您已有的座位表Markdown文本。
    *   点击文本框右上角的“导入”按钮。表格内容将显示在“座位表预览”区域，并作为后续微调的基础。
*   **细微调整座位**（此功能区在成功进行AI智能编排或成功导入座位表后自动显示）：
    *   **输入修改指令**：在“输入需要微调的部分”文本框中，用自然语言描述您想做的具体修改。例如：“请将张三和王五调换位置。”，“李四想坐到座位10。”，“将座位5清空。”
    *   **发送**：点击文本框右上角的“发送”按钮。
        *   AI会根据您提供的指令、当前的人员信息、原始座位表结构、当前的座位表布局以及座位映射关系进行处理。AI的思考过程会显示在“AI 微调思考过程...”区域。
        *   AI的回复和系统尝试应用修改的结果会显示在下方的输出区域。
        *   如果AI的修改指令被系统成功解析并应用，座位表预览会自动更新。
        *   您可以进行多轮对话式修改，AI会基于上一步修改后的最新座位表状态进行操作。

### 5. 🤖 Agent 模式：您的智能助理

Agent 模式是 DeepDeskmate 的核心亮点，它将一个强大的大语言模型（LLM）转变为能够理解应用上下文并自主执行任务的智能助理。您不再需要按部就班地点击各个按钮，只需通过自然语言对话，即可驱动应用完成从人员管理到复杂座位编排的各种任务。

#### 工作原理

当您在 Agent 对话框中输入指令时，系统会执行以下操作：

1.  **上下文感知**：系统会将当前应用的**完整状态**打包成一份详细的上下文，包括：
    *   当前所有人员的信息表 (`currentPersonnelTable`)。
    *   当前的座位布局（行数、列数、同桌数）。
    *   原始的空座位表结构 (`originalSeatFormat`)，用于定位。
    *   已经编排好的座位表 (`currentSeatTable`)。
    *   一份详细的座位占用映射表 (`seatMappingInfo`)。
2.  **智能决策**：这份丰富的上下文连同您的指令一起发送给 Agent 模型。模型会综合分析所有信息，决策出完成您指令所需的最佳步骤。
3.  **工具调用**：Agent 通过生成特定格式的“工具调用”指令来执行操作。这些指令会被应用前端精确解析并执行。

#### Agent 的可用工具集

Agent 根据您的需求，主要会调用以下几种内部工具：

*   **`<AdjustLayout>` (调整布局)**：当 Agent 认为当前的座位数量或结构无法满足需求时（例如，人员多于座位），它会调用此工具来修改行数、列数或同桌数。这是一个**排他性**操作，执行后 Agent 会在新布局的基础上继续处理您之前的请求。
*   **`<SetPersonnelTable>` (更新人员信息)**：用于处理所有关于人员信息的变更，如新增、修改或删除人员。
*   **`<SetSeatTable>` (全量编排座位)**：当需要进行一次全新的、完整的座位编排时，Agent 会生成一个包含所有人员的完整座位表。
*   **`<AdjustSeatTable>` (微调座位)**：当您只想对现有的座位安排做局部修改时（如交换两人位置、将某人移动到空位），Agent 会调用此工具。
*   **纯文本回复**：如果您的输入是问候、提问或无法匹配任何工具的指令，Agent 会像一个聊天机器人一样，直接用自然语言回复您。

#### 使用示例

*   **简单指令**：
    > "把张三和李四的位置换一下。"
    *   *Agent 会分析出这是一个微调任务，并生成 `[SWAP]` 指令来调用 `<AdjustSeatTable>` 工具。*

*   **复合指令**：
    > "新来一个同事叫王五，男，是产品经理。把他安排在赵六旁边。哦对了，把刘七从名单里删掉。"
    *   *Agent 会识别出这是一个跨模块的复杂任务。它可能会同时调用 `<SetPersonnelTable>`（删除刘七、新增王五）和 `<AdjustSeatTable>` 或 `<SetSeatTable>`（安排王五的座位）来一步到位完成所有操作。*

*   **需要布局调整的指令**：
    > "人太多了，座位好像不够，帮我加一行吧。"
    *   *Agent 会首先调用 `<AdjustLayout>` 工具增加座位表的行数。布局更新后，它会自动继续思考如何将所有人都安排进新的座位表中。*

通过这种方式，Agent 模式将繁琐的多步操作简化为一次自然语言对话，极大地提升了使用体验和工作效率。

### 6. 其他

*   **页脚信息**：页面底部包含开发者信息和项目GitHub链接，会在滚动到底部时渐显。

### 可爱的AI光标
你可以在[images](images)中发现我为生成中的AI设计的4种光标，未来会加入。很可爱对吧？

## 🛠️ 项目背景与探索

本项目是作者 (SammFang) 对大语言模型（LLM）深度融合应用开发的初次尝试，旨在探索如何将先进的AI技术更紧密地集成到日常应用中，以解决实际问题、提升效率和改善用户体验。通过DeepDeskmate，作者尝试将LLM的自然语言理解、逻辑推理和内容生成能力应用于座位编排、信息管理这类常见但细节繁琐的场景。

这不仅仅是一个工具的开发，更是一次学习和实践的过程，体验了从需求构思、提示工程设计、前端交互实现到与LLM API对接调试的完整链路。希望这个小项目能为对AI赋能日常生活和工作场景感兴趣的开发者们提供一些参考和启发。

## 📜 许可证

本项目采用 Apache License 2.0 授权。详细信息请参阅 [LICENSE](LICENSE) 文件。

## 🌐 试用网站

您可以在以下网站试用DeepDeskmate的在线版本：  
[https://deepdesk.sammfang.top](https://deepdesk.sammfang.top)

---
感谢您能读到这里，祝您使用愉快！欢迎您进行二次开发和修改。
<p align="center">
  <img src="images/logo-text.png" alt="DeepDeskmate Logo" width="900"/>
</p>