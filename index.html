<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepDeskmate</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>DeepDeskmate</h1>

        <div class="api-key-section" id="api-key-section">
            <label for="api-key">DeepSeek API 密钥:</label>
            <input type="password" id="api-key" placeholder="在此输入您的 API 密钥">
            <button id="save-key">保存密钥</button>
            <button id="toggle-api-key" onclick="toggleApiKeySection()">折叠</button>
        </div>

        <div class="input-section">
            <label for="person-description">输入人物描述:</label>
            <textarea id="person-description" rows="4" placeholder="例如：张三，男，技术负责人，擅长沟通协调。"></textarea>
            <button id="send-description">发送给 AI</button>
        </div>

        <div class="loading-indicator" id="loading" style="display: none;">
            AI 正在处理中...
        </div>

        <div class="content-wrapper">
            <div class="output-section">
                <h2>人员信息表</h2>
                <div id="markdown-output"></div>
            </div>

            <div class="table-generator-section">
                <h2>座位列表生成器</h2>
                <div class="generator-controls">
                    <label for="rows">行数:</label>
                    <input type="number" id="rows" min="1" value="3">
                    <label for="cols">列数:</label>
                    <input type="number" id="cols" min="1" value="3">
                    <label for="desk-mates">同桌数:</label>
                    <input type="number" id="desk-mates" min="1" value="1">
                    <button id="generate-table">生成表格</button>
                    <button id="copy-table">复制表格</button>
                </div>
                <div class="arrangement-section">
                    <label for="arrangement-remarks">编排备注:</label>
                    <textarea id="arrangement-remarks" rows="3" placeholder="输入需要 AI 考虑的编排要求，例如：张三和李四是好朋友，请安排他们坐在一起。王五视力不好，请安排在前排。"></textarea>
                    <button id="ai-arrange-button">AI 智能编排</button>
                </div>
                <div id="ai-thinking-output" style="display: none;">
                    <h3>AI 思考过程...</h3>
                    <pre></pre> <!-- 用于显示思考过程 -->
                </div>
                <div id="table-preview"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> 
    <script src="script.js"></script>
    <footer id="footer" style="text-align: center; padding: 10px; background-color: #f0f0f0; position: relative; bottom: 0; width: 100%; display: none;">
        <p>Developed By SammFang | GitHub: <a href="https://github.com/Samm-Fang/DeepDeskmate" target="_blank">https://github.com/Samm-Fang/DeepDeskmate</a></p>
    </footer>
    <script>
        window.addEventListener('scroll', function() {
            const footer = document.getElementById('footer');
            if ((window.innerHeight + window.pageYOffset) >= document.body.offsetHeight) {
                footer.style.display = 'block';
            } else {
                footer.style.display = 'none';
            }
        });
    </script>
</body>
</html>
