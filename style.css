body {
    font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background-color: #f4f7f6;
    color: #333;
    margin: 0;
    padding: 20px 0; /* Add padding to top and bottom of body */
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    align-items: center; /* Center .container horizontally */
    min-height: 100vh;
    box-sizing: border-box;
}

.container {
    background-color: #ffffff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 1200px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 30px; /* Consistent gap between direct children of container */
}

.main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px; /* Gap between title and settings button */
    /* margin-bottom: -10px; Remove or adjust if container gap is sufficient */
}

h1 {
    color: #2c3e50;
    text-align: left; /* Align to left as it's part of a flex row now */
    margin-bottom: 0; /* Margin handled by main-header gap or container gap */
    font-size: 2.3rem;
    font-weight: 700;
}

/* 通用 Section 样式 */
.settings-section,
.input-section,
.output-section,
.table-generator-section {
    background-color: #fdfdfd;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
    border: 1px solid #e9e9e9;
    display: flex;
    flex-direction: column;
    gap: 15px; /* Consistent gap within sections */
}

h2 {
    color: #34495e;
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.7rem;
    border-bottom: 2px solid #3498db;
    padding-bottom: 8px;
}

label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #555;
    font-size: 1rem;
}

input[type="password"],
textarea,
input[type="text"],
input[type="number"],
select {
    width: 100%; /* Make inputs full width by default */
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 1rem;
    box-sizing: border-box;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

input:focus,
textarea:focus,
select:focus {
    border-color: #3498db;
    box-shadow: 0 0 8px rgba(52, 152, 219, 0.25);
    outline: none;
}

textarea {
    resize: vertical;
    min-height: 90px;
}

button {
    background-color: #3498db;
    color: #ffffff;
    border: none;
    padding: 10px 18px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease, opacity 0.3s ease;
    font-weight: 500;
    line-height: 1.5; /* Ensure text is vertically centered */
}

button:hover {
    background-color: #2980b9;
}

button:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
    opacity: 0.7;
}

/* Specific Button Groupings and Alignments */
.settings-section {
    padding: 0; /* Remove padding if it's just a button container now */
    border: none;
    box-shadow: none;
    background-color: transparent;
    /* align-items: flex-start; is fine */
}
#open-settings-button {
    width: auto; 
}

.input-section {
    gap: 8px; /* Gap between label and input group */
}
.description-input-group {
    display: flex;
    align-items: flex-start; /* Align button with top of textarea */
    gap: 10px;
}
.description-input-group textarea {
    flex-grow: 1; /* Textarea takes available space */
    margin-bottom: 0; /* Remove default margin if any */
}
.description-input-group #send-description {
    width: auto; /* Button size to content */
    flex-shrink: 0; /* Prevent button from shrinking */
    /* align-self: flex-start; Remove if not needed due to parent align-items */
}


.output-section .controls {
    display: flex;
    gap: 10px;
}
.output-section .controls button {
    flex-grow: 1; /* Make buttons in this group share space */
}

.import-personnel-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.import-personnel-section button#import-personnel-button {
    align-self: flex-end; /* Align to right, was moved to .controls */
    width: auto;
}

.import-seat-table-section { /* Style similar to import-personnel-section */
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 20px; 
    padding-top: 20px; 
    border-top: 1px solid #eee;
}
.import-seat-table-section h3 {
    margin-top: 0;
    margin-bottom: 5px; /* Consistent with other h3 in similar sections */
    font-size: 1.2rem; /* Consistent size */
    color: #34495e;
}
.import-seat-table-section textarea {
    min-height: 80px; /* Adjust height as needed */
}
.import-seat-table-section button {
    align-self: flex-end;
    width: auto;
}

.seat-modification-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
    /* margin-top, padding-top, border-top are set inline in HTML, can be moved here if preferred */
}
.seat-modification-section h3 {
    margin-top: 0;
    margin-bottom: 5px;
    font-size: 1.2rem;
    color: #34495e;
}
.seat-modification-section p {
    font-size: 0.9rem;
    color: #555;
    margin-top: 0;
    margin-bottom: 5px;
}
.seat-modification-section textarea {
    min-height: 60px; /* Shorter textarea for modification input */
}
.seat-modification-section button {
    align-self: flex-end;
    width: auto;
}
#seat-modification-output {
    font-size: 0.9rem;
    white-space: pre-wrap; /* To respect newlines from AI */
}


.table-generator-section .generator-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    align-items: center;
}
.table-generator-section .generator-controls label {
    margin-bottom: 0; /* Remove bottom margin for inline labels */
}
.table-generator-section .generator-controls input[type="number"] {
    width: 70px; /* Smaller width for number inputs */
    margin-bottom: 0; /* Remove bottom margin */
}
.table-generator-section .generator-buttons {
    display: flex;
    gap: 10px;
    width: 100%; 
}
.table-generator-section .generator-buttons button {
    flex-grow: 1; /* Make buttons share space */
}


.table-generator-section .arrangement-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
/* .arrangement-controls is removed, direct styling for children if needed */
.table-generator-section .arrangement-section textarea#arrangement-remarks {
    /* Styles for textarea if needed, already covered by general textarea styles */
}
.table-generator-section .arrangement-section button#ai-arrange-button {
    width: 100%; /* Make it full width as it's now on its own line */
    margin-top: 5px; /* Add some space above it */
}

/* .arrangement-actions div is removed */
/* #copy-arranged-table is now in .generator-buttons */


/* Output Areas */
#markdown-output, #table-preview {
    border: 1px solid #e0e0e0;
    padding: 15px;
    border-radius: 8px;
    background-color: #ffffff;
    min-height: 120px;
    overflow-x: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
}

/* Markdown Table Styles */
#markdown-output table, #table-preview table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin-top: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    overflow: hidden;
}

#markdown-output th, #markdown-output td, #table-preview th, #table-preview td {
    padding: 10px 12px;
    text-align: left;
    border-bottom: 1px solid #eee;
}
#markdown-output td:not(:last-child), #table-preview td:not(:last-child) {
    border-right: 1px solid #eee; /* Add vertical borders */
}


#markdown-output th, #table-preview th {
    background-color: #f8f9fa;
    font-weight: 600; /* Slightly less bold */
    color: #454d55; /* Darker gray for header text */
    border-bottom: 2px solid #dee2e6; /* Stronger bottom border for header */
}
#markdown-output th:not(:last-child), #table-preview th:not(:last-child) {
    border-right: 1px solid #dee2e6; /* Vertical borders for header */
}


#markdown-output tr:last-child td, #table-preview tr:last-child td {
    border-bottom: none;
}

#markdown-output tr:nth-child(even) td, #table-preview tr:nth-child(even) td {
    background-color: #f9f9f9; /* Subtle even row color */
}

/* Layout for Output and Table Generator */
.content-wrapper {
    display: grid;
    grid-template-columns: 1fr; /* Default to single column for smaller screens */
    gap: 30px;
}

@media (min-width: 768px) {
    .content-wrapper {
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); /* Responsive columns */
    }
}


#ai-thinking-output {
    padding: 15px;
    background-color: #ecf0f1;
    border: 1px solid #bdc3c7;
    border-radius: 8px;
    margin-top: 10px;
}

#ai-thinking-output h3 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 1.1rem;
    color: #2c3e50;
    border-bottom: 1px solid #bdc3c7;
    padding-bottom: 5px;
}

#ai-thinking-output pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 200px;
    overflow-y: auto;
    background-color: #fff;
    padding: 10px;
    border-radius: 6px;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
    border: 1px solid #eee;
}

/* Footer */
#footer {
    text-align: center;
    padding: 15px;
    background-color: #34495e;
    color: #ecf0f1;
    width: 100%;
    box-sizing: border-box;
    opacity: 0;
    transition: opacity 0.5s ease;
    margin-top: auto; /* Push footer to bottom if content is short */
}

#footer p {
    margin: 0;
    font-size: 0.9rem;
}

#footer a {
    color: #3498db;
    text-decoration: none;
}

#footer a:hover {
    text-decoration: underline;
}

/* Sidebar Styles */
.sidebar {
    position: fixed;
    top: 0;
    right: -350px; /* Start off-screen, slightly narrower */
    width: 350px; /* Sidebar width */
    height: 100%;
    background-color: #fdfdfd;
    box-shadow: -3px 0 12px rgba(0, 0, 0, 0.15);
    transition: right 0.3s ease-in-out;
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.sidebar.open {
    right: 0;
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    border-bottom: 2px solid #3498db;
    margin-bottom: 0; /* Gap is handled by sidebar flex */
}

.sidebar-header h2 {
    margin: 0;
    font-size: 1.4rem; /* Slightly smaller */
    color: #34495e;
    border-bottom: none;
    padding-bottom: 0;
}

.sidebar .close-button {
     color: #999;
     font-size: 26px;
     font-weight: bold;
     cursor: pointer;
     padding: 0 5px; /* Easier to click */
}
.sidebar .close-button:hover {
    color: #333;
}

.sidebar-content {
    display: flex;
    flex-direction: column;
    gap: 20px; /* Gap between sections in sidebar */
}

.active-config-display {
    background-color: #e9f5ff;
    border: 1px solid #b3d9ff;
    padding: 10px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
    color: #0056b3;
}
.active-config-display p { margin: 0; font-weight: 500; }
.active-config-display strong { color: #004085; }

.config-item-header {
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between; /* Pushes h3 and active-indicator apart if needed */
}
.config-item-header h3 {
    margin: 0; /* Remove default h3 margin */
    display: flex;
    align-items: center;
    gap: 8px; /* Gap between icon and text */
    font-size: 1.1rem;
    color: #34495e;
}
.collapse-icon {
    font-size: 0.8em;
    transition: transform 0.2s ease-in-out;
}
.model-config-item.collapsed .collapse-icon {
    transform: rotate(-90deg);
}
.model-config-item.collapsed .config-item-content {
    display: none;
}
.active-indicator {
    font-size: 0.8rem;
    color: #27ae60;
    font-weight: bold;
    margin-left: auto; /* Pushes to the right if header is flex */
}


.deepseek-quick-config, #model-configs-list {
    padding-top: 15px;
    border-top: 1px solid #eee;
}
.deepseek-quick-config:first-child, #model-configs-list:first-child {
    /* Remove top border if it's the first direct child after active-config-display or header */
     border-top: none;
     padding-top: 0;
}


.deepseek-quick-config h3 { /* Keep this for DeepSeek section if its h3 is not part of a header */
    margin-top: 0;
    margin-bottom: 12px;
    font-size: 1.1rem;
    color: #34495e;
}

.model-config-item {
    border: 1px solid #ddd;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 8px;
    background-color: #f9f9f9;
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: border-color 0.3s ease;
}
.model-config-item.active-config {
    border-color: #27ae60; /* Green border for active config */
    box-shadow: 0 0 8px rgba(39, 174, 96, 0.3);
}

.config-item-content {
    display: flex;
    flex-direction: column;
    gap: 10px; /* Consistent gap for content elements */
}


.model-config-item label {
    margin-bottom: 3px; /* Tighter label spacing */
    font-weight: 500; /* Normal weight for these labels */
}

.model-config-item input[type="text"],
.model-config-item input[type="password"],
.model-config-item select {
    width: 100%; /* Full width */
    padding: 8px;
    margin-bottom: 5px; /* Reduced margin */
}

.model-config-item .models-list {
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px dashed #ccc;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.model-item {
    border: 1px dashed #ccc;
    padding: 10px;
    border-radius: 6px;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.model-item label { font-weight: normal; color: #666; }
.model-item input[type="text"], .model-item select { padding: 7px; margin-bottom: 5px; }
.model-item select[multiple] { height: 70px; }

/* Button styling within sidebar model configs */
.model-config-item .config-actions {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}
.model-config-item .config-actions button {
    flex-grow: 1;
    padding: 8px 10px;
    font-size: 0.9rem;
}

button.primary-button { background-color: #3498db; }
button.primary-button:hover { background-color: #2980b9; }
button.primary-button:disabled { background-color: #a9d7f4; color: #777; }


button.secondary-button { background-color: #95a5a6; }
button.secondary-button:hover { background-color: #7f8c8d; }

button.danger-button { background-color: #e74c3c; }
button.danger-button:hover { background-color: #c0392b; }

/* Ensure other sidebar buttons also get consistent styling if not covered by above */
.model-item button.remove-model, /* Already has specific color */
.model-config-item button.add-model, /* Already has specific color */
#add-model-config, /* Already has specific color */
.deepseek-quick-config button { /* Already has specific color */
    width: 100%; 
    padding: 9px;
    font-size: 0.95rem;
}
/* Specific overrides if needed, e.g. for remove-model if it's not a danger-button by class */
.model-item button.remove-model { background-color: #e74c3c; }
.model-item button.remove-model:hover { background-color: #c0392b; }


.model-list-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}
.model-list-controls h4 { margin: 0; font-size: 1rem; }
.model-list-controls .fetch-models {
     padding: 6px 10px;
     background-color: #5bc0de;
     color: white;
     font-size: 0.9rem;
     width: auto; /* Not full width */
}
.model-list-controls .fetch-models:hover { background-color: #46b8da; }


/* Responsive adjustments */
@media (max-width: 768px) {
    .container {
        padding: 20px;
        margin: 20px 10px; /* Adjust margin for smaller screens */
        gap: 20px;
    }

    h1 { font-size: 2rem; }
    h2 { font-size: 1.5rem; }

    .input-section #send-description,
    .output-section .controls,
    .table-generator-section .generator-buttons,
    .table-generator-section .arrangement-controls,
    .table-generator-section #copy-arranged-table {
        flex-direction: column; /* Stack buttons vertically on small screens */
        align-items: stretch; /* Make them full width */
    }
    .input-section #send-description,
    .table-generator-section .arrangement-controls button,
    .table-generator-section #copy-arranged-table {
        width: 100%; /* Ensure full width when stacked */
    }
    .output-section .controls button {
        flex-grow: 0; /* Don't grow when stacked */
    }
     .table-generator-section .generator-controls {
        flex-direction: column;
        align-items: stretch;
    }
    .table-generator-section .generator-controls input[type="number"] {
        width: 100%;
    }
}

/* Scrollbar Styles */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
::-webkit-scrollbar-thumb { background: #aaa; border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: #777; }

/* Gender coloring - already present, kept for completeness */
.gender-male { background-color: #e6f3ff; }
.gender-female { background-color: #ffe6f2; }
